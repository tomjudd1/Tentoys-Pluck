/*!
 * Modernizr v2.8.3
 * www.modernizr.com
 *
 * Copyright (c) Faruk Ates, Paul Irish, Alex Sexton
 * Available under the BSD and MIT licenses: www.modernizr.com/license/
 */
function randUpAndDown(e,t){return Math.round(Math.random()*t+e)-t/2}function rand(e,t){return Math.round(Math.random()*(t-e)+e)}function round2DP(e){return Math.round(100*e)/100}function round1DP(e){return Math.round(10*e)/10}function getDegrees(e){return d=e*(180/Math.PI)}function getRadians(e){return r=e*(Math.PI/180)}function getVector(e,t,n){var r=getRadians(n),i=e.x+Math.sin(r)*t,o=e.y-Math.cos(r)*t,a=new createjs.Point(i,o);return a}function getDistance(e,t){var n=e.x-t.x;n*=n;var r=e.y-t.y;return r*=r,Math.sqrt(n+r)}function getAngle(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.atan2(r,n);return i=getDegrees(i)+90,0>i&&(i=360+i),i}function isNumber(e){return e===parseFloat(e)}function isEven(e){return isNumber(e)&&e%2==0}function isOdd(e){return isNumber(e)&&Math.abs(e)%2==1}function playSFX(e){new Howl({urls:["data/sfx/"+e+".mp3","data/sfx/"+e+".ogg"],autoplay:!0,volume:soundLeval}).play()}function changeText(e){$(".js-text-change").html(e)}function init(){document.body.style.cursor="crosshair",createjs.Ticker.setInterval(45),createjs.Ticker.setFPS(45),stage=new createjs.Stage("demoCanvas"),stage.enableMouseOver(),createjs.Touch.enable(stage),hairCont=stage.addChild(new createjs.Container),hairCont.width=window.innerWidth*(1-padding),hairCont.height=window.innerHeight*(1-padding),resize();var e=Math.round(Math.sqrt(noHairs)),t=hairCont.width/e,n=hairCont.height/e;console.log("SQRT = "+e);for(var r=0;noHairs>r;r++){var i=new Hair(new createjs.Point(0,0),hairLength-rand(0,.25*hairLength),hairColor,hairWidth,skinColor,rand(hairStrength[0],hairStrength[1])),o=Math.floor(r/e);console.log(o);var a=-t*hairOffset;if(isEven(o)&&(a=t*hairOffset),i.x=.5*t+t*r-Math.round(e)*t*o-a+rand(-hairPosRandom,hairPosRandom),i.y=.5*n+n*o+rand(-hairPosRandom,hairPosRandom),o>=e)break;hairs.push(i),hairCont.addChild(hairs[r]);var s=(new createjs.Point(.5*hairCont.width,1.5*hairCont.height),new createjs.Point(i.x,i.y),0);i.rotation=s+rand(-hairRotRandom,hairRotRandom),i.setGravity(i.rotation),i.on("mousedown",hairClicked)}stage.update(),createjs.Ticker.addEventListener("tick",tick)}function hairClicked(e){console.log(hairCont.children.length),hairCont.setChildIndex(e.target,hairCont.children.length-1)}function tick(){stage.update()}function resize(){hairCont.x=.5*window.innerWidth-.5*hairCont.width,hairCont.y=.5*window.innerHeight-.5*hairCont.height,stage.canvas.width=window.innerWidth,stage.canvas.height=window.innerHeight}if(window.Modernizr=function(e,t,n){function r(e){_.cssText=e}function i(e,t){return r(E.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var r in e){var i=e[r];if(!a(i,"-")&&_[i]!==n)return"pfx"==t?i:!0}return!1}function u(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return r===!1?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function d(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+x.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?s(i,t):(i=(e+" "+T.join(r+" ")+r).split(" "),u(i,t,n))}function c(){p.input=function(n){for(var r=0,i=n.length;i>r;r++)A[n[r]]=!!(n[r]in w);return A.list&&(A.list=!(!t.createElement("datalist")||!e.HTMLDataListElement)),A}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),p.inputtypes=function(e){for(var r,i,o,a=0,s=e.length;s>a;a++)w.setAttribute("type",i=e[a]),r="text"!==w.type,r&&(w.value=b,w.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&w.style.WebkitAppearance!==n?(v.appendChild(w),o=t.defaultView,r=o.getComputedStyle&&"textfield"!==o.getComputedStyle(w,null).WebkitAppearance&&0!==w.offsetHeight,v.removeChild(w)):/^(search|tel)$/.test(i)||(r=/^(url|email)$/.test(i)?w.checkValidity&&w.checkValidity()===!1:w.value!=b)),P[e[a]]=!!r;return P}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var l,h,f="2.8.3",p={},g=!0,v=t.documentElement,m="modernizr",y=t.createElement(m),_=y.style,w=t.createElement("input"),b=":)",S={}.toString,E=" -webkit- -moz- -o- -ms- ".split(" "),C="Webkit Moz O ms",x=C.split(" "),T=C.toLowerCase().split(" "),k={svg:"http://www.w3.org/2000/svg"},N={},P={},A={},X=[],Y=X.slice,j=function(e,n,r,i){var o,a,s,u,d=t.createElement("div"),c=t.body,l=c||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=i?i[r]:m+(r+1),d.appendChild(s);return o=["&#173;",'<style id="s',m,'">',e,"</style>"].join(""),d.id=m,(c?d:l).innerHTML+=o,l.appendChild(d),c||(l.style.background="",l.style.overflow="hidden",u=v.style.overflow,v.style.overflow="hidden",v.appendChild(l)),a=n(d,e),c?d.parentNode.removeChild(d):(l.parentNode.removeChild(l),v.style.overflow=u),!!a},L=function(t){var n=e.matchMedia||e.msMatchMedia;if(n)return n(t)&&n(t).matches||!1;var r;return j("@media "+t+" { #"+m+" { position: absolute; } }",function(t){r="absolute"==(e.getComputedStyle?getComputedStyle(t,null):t.currentStyle).position}),r},M=function(){function e(e,i){i=i||t.createElement(r[e]||"div"),e="on"+e;var a=e in i;return a||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),a=o(i[e],"function"),o(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,a}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),O={}.hasOwnProperty;h=o(O,"undefined")||o(O.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=Y.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var o=new i,a=t.apply(o,n.concat(Y.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(Y.call(arguments)))};return r}),N.flexbox=function(){return d("flexWrap")},N.flexboxlegacy=function(){return d("boxDirection")},N.canvas=function(){var e=t.createElement("canvas");return!(!e.getContext||!e.getContext("2d"))},N.canvastext=function(){return!(!p.canvas||!o(t.createElement("canvas").getContext("2d").fillText,"function"))},N.webgl=function(){return!!e.WebGLRenderingContext},N.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:j(["@media (",E.join("touch-enabled),("),m,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},N.geolocation=function(){return"geolocation"in navigator},N.postmessage=function(){return!!e.postMessage},N.websqldatabase=function(){return!!e.openDatabase},N.indexedDB=function(){return!!d("indexedDB",e)},N.hashchange=function(){return M("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},N.history=function(){return!(!e.history||!history.pushState)},N.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},N.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},N.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),a(_.backgroundColor,"rgba")},N.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),a(_.backgroundColor,"rgba")||a(_.backgroundColor,"hsla")},N.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(_.background)},N.backgroundsize=function(){return d("backgroundSize")},N.borderimage=function(){return d("borderImage")},N.borderradius=function(){return d("borderRadius")},N.boxshadow=function(){return d("boxShadow")},N.textshadow=function(){return""===t.createElement("div").style.textShadow},N.opacity=function(){return i("opacity:.55"),/^0.55$/.test(_.opacity)},N.cssanimations=function(){return d("animationName")},N.csscolumns=function(){return d("columnCount")},N.cssgradients=function(){var e="background-image:",t="gradient(linear,left top,right bottom,from(#9f9),to(white));",n="linear-gradient(left top,#9f9, white);";return r((e+"-webkit- ".split(" ").join(t+e)+E.join(n+e)).slice(0,-e.length)),a(_.backgroundImage,"gradient")},N.cssreflections=function(){return d("boxReflect")},N.csstransforms=function(){return!!d("transform")},N.csstransforms3d=function(){var e=!!d("perspective");return e&&"webkitPerspective"in v.style&&j("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t){e=9===t.offsetLeft&&3===t.offsetHeight}),e},N.csstransitions=function(){return d("transition")},N.fontface=function(){var e;return j('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),o=i.sheet||i.styleSheet,a=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e},N.generatedcontent=function(){var e;return j(["#",m,"{font:0/0 a}#",m,':after{content:"',b,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},N.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(r){}return n},N.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(r){}return n},N.localstorage=function(){try{return localStorage.setItem(m,m),localStorage.removeItem(m),!0}catch(e){return!1}},N.sessionstorage=function(){try{return sessionStorage.setItem(m,m),sessionStorage.removeItem(m),!0}catch(e){return!1}},N.webworkers=function(){return!!e.Worker},N.applicationcache=function(){return!!e.applicationCache},N.svg=function(){return!!t.createElementNS&&!!t.createElementNS(k.svg,"svg").createSVGRect},N.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==k.svg},N.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(S.call(t.createElementNS(k.svg,"animate")))},N.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(S.call(t.createElementNS(k.svg,"clipPath")))};for(var H in N)h(N,H)&&(l=H.toLowerCase(),p[l]=N[H](),X.push((p[l]?"":"no-")+l));return p.input||c(),p.addTest=function(e,t){if("object"==typeof e)for(var r in e)h(e,r)&&p.addTest(r,e[r]);else{if(e=e.toLowerCase(),p[e]!==n)return p;t="function"==typeof t?t():t,"undefined"!=typeof g&&g&&(v.className+=" "+(t?"":"no-")+e),p[e]=t}return p},r(""),y=w=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=y.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=m[e[g]];return t||(t={},v++,e[g]=v,m[v]=t),t}function o(e,n,r){if(n||(n=t),c)return n.createElement(e);r||(r=i(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():p.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function a(e,n){if(e||(e=t),c)return e.createDocumentFragment();n=n||i(e);for(var o=n.frag.cloneNode(),a=0,s=r(),u=s.length;u>a;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return y.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(y,t.frag)}function u(e){e||(e=t);var r=i(e);return!y.shivCSS||d||r.hasCSS||(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||s(e,r),e}var d,c,l="3.7.0",h=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,g="_html5shiv",v=0,m={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",d="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){d=!0,c=!0}}();var y={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:l,shivCSS:h.shivCSS!==!1,supportsUnknownElements:c,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:u,createElement:o,createDocumentFragment:a};e.html5=y,u(t)}(this,t),p._version=f,p._prefixes=E,p._domPrefixes=T,p._cssomPrefixes=x,p.mq=L,p.hasEvent=M,p.testProp=function(e){return s([e])},p.testAllProps=d,p.testStyles=j,p.prefixed=function(e,t,n){return t?d(e,t,n):d(e,"pfx")},v.className=v.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(g?" js "+X.join(" "):""),p}(this,this.document),function(){var e={},t=null,n=!0,r=!1;try{"undefined"!=typeof AudioContext?t=new AudioContext:"undefined"!=typeof webkitAudioContext?t=new webkitAudioContext:n=!1}catch(i){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(i){r=!0}else r=!0;if(n){var o="undefined"==typeof t.createGain?t.createGainNode():t.createGain();o.gain.value=1,o.connect(t.destination)}var a=function(e){this._volume=1,this._muted=!1,this.usingWebAudio=n,this.ctx=t,this.noAudio=r,this._howls=[],this._codecs=e,this.iOSAutoEnable=!0};a.prototype={volume:function(e){var t=this;if(e=parseFloat(e),e>=0&&1>=e){t._volume=e,n&&(o.gain.value=e);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].volume=t._howls[r]._volume*t._volume;return t}return n?o.gain.value:t._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(e){var t=this;t._muted=e,n&&(o.gain.value=e?0:t._volume);for(var r in t._howls)if(t._howls.hasOwnProperty(r)&&t._howls[r]._webAudio===!1)for(var i=0;i<t._howls[r]._audioNode.length;i++)t._howls[r]._audioNode[i].muted=e},codecs:function(e){return this._codecs[e]},_enableiOSAudio:function(){var e=this;if(!t||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var n=function(){var r=t.createBuffer(1,1,22050),i=t.createBufferSource();i.buffer=r,i.connect(t.destination),"undefined"==typeof i.start?i.noteOn(0):i.start(0),setTimeout(function(){(i.playbackState===i.PLAYING_STATE||i.playbackState===i.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,window.removeEventListener("touchstart",n,!1))},0)};return window.addEventListener("touchstart",n,!1),e}}};var s=null,u={};r||(s=new Audio,u={mp3:!!s.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!s.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!s.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!s.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!s.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(s.canPlayType("audio/x-m4a;")||s.canPlayType("audio/m4a;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(s.canPlayType("audio/x-mp4;")||s.canPlayType("audio/mp4;")||s.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!s.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var d=new a(u),c=function(e){var r=this;r._autoplay=e.autoplay||!1,r._buffer=e.buffer||!1,r._duration=e.duration||0,r._format=e.format||null,r._loop=e.loop||!1,r._loaded=!1,r._sprite=e.sprite||{},r._src=e.src||"",r._pos3d=e.pos3d||[0,0,-.5],r._volume=void 0!==e.volume?e.volume:1,r._urls=e.urls||[],r._rate=e.rate||1,r._model=e.model||null,r._onload=[e.onload||function(){}],r._onloaderror=[e.onloaderror||function(){}],r._onend=[e.onend||function(){}],r._onpause=[e.onpause||function(){}],r._onplay=[e.onplay||function(){}],r._onendTimer=[],r._webAudio=n&&!r._buffer,r._audioNode=[],r._webAudio&&r._setupAudioNode(),"undefined"!=typeof t&&t&&d.iOSAutoEnable&&d._enableiOSAudio(),d._howls.push(r),r.load()};if(c.prototype={load:function(){var e=this,t=null;if(r)return void e.on("loaderror");for(var n=0;n<e._urls.length;n++){var i,o;if(e._format)i=e._format;else{if(o=e._urls[n],i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),!i)return void e.on("loaderror");i=i[1].toLowerCase()}if(u[i]){t=e._urls[n];break}}if(!t)return void e.on("loaderror");if(e._src=t,e._webAudio)l(e,t);else{var s=new Audio;s.addEventListener("error",function(){s.error&&4===s.error.code&&(a.noAudio=!0),e.on("loaderror",{type:s.error?s.error.code:0})},!1),e._audioNode.push(s),s.src=t,s._pos=0,s.preload="auto",s.volume=d._muted?0:e._volume*d.volume();var c=function(){e._duration=Math.ceil(10*s.duration)/10,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play(),s.removeEventListener("canplaythrough",c,!1)};s.addEventListener("canplaythrough",c,!1),s.load()}return e},urls:function(e){var t=this;return e?(t.stop(),t._urls="string"==typeof e?[e]:e,t._loaded=!1,t.load(),t):t._urls},play:function(e,n){var r=this;return"function"==typeof e&&(n=e),e&&"function"!=typeof e||(e="_default"),r._loaded?r._sprite[e]?(r._inactiveNode(function(i){i._sprite=e;var o=i._pos>0?i._pos:r._sprite[e][0]/1e3,a=0;r._webAudio?(a=r._sprite[e][1]/1e3-i._pos,i._pos>0&&(o=r._sprite[e][0]/1e3+o)):a=r._sprite[e][1]/1e3-(o-r._sprite[e][0]/1e3);var s,u=!(!r._loop&&!r._sprite[e][2]),c="string"==typeof n?n:Math.round(Date.now()*Math.random())+"";if(function(){var t={id:c,sprite:e,loop:u};s=setTimeout(function(){!r._webAudio&&u&&r.stop(t.id).play(e,t.id),r._webAudio&&!u&&(r._nodeById(t.id).paused=!0,r._nodeById(t.id)._pos=0,r._clearEndTimer(t.id)),r._webAudio||u||r.stop(t.id),r.on("end",c)},1e3*a),r._onendTimer.push({timer:s,id:t.id})}(),r._webAudio){var l=r._sprite[e][0]/1e3,h=r._sprite[e][1]/1e3;i.id=c,i.paused=!1,p(r,[u,l,h],c),r._playStart=t.currentTime,i.gain.value=r._volume,"undefined"==typeof i.bufferSource.start?i.bufferSource.noteGrainOn(0,o,a):i.bufferSource.start(0,o,a)}else{if(4!==i.readyState&&(i.readyState||!navigator.isCocoonJS))return r._clearEndTimer(c),function(){var t=r,o=e,a=n,s=i,u=function(){t.play(o,a),s.removeEventListener("canplaythrough",u,!1)};s.addEventListener("canplaythrough",u,!1)}(),r;i.readyState=4,i.id=c,i.currentTime=o,i.muted=d._muted||i.muted,i.volume=r._volume*d.volume(),setTimeout(function(){i.play()},0)}return r.on("play"),"function"==typeof n&&n(c),r}),r):("function"==typeof n&&n(),r):(r.on("load",function(){r.play(e,n)}),r)},pause:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.pause(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=t.pos(null,e),t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return t.on("pause"),t},stop:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.stop(e)}),t;t._clearEndTimer(e);var n=e?t._nodeById(e):t._activeNode();if(n)if(n._pos=0,t._webAudio){if(!n.bufferSource||n.paused)return t;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return t},mute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.mute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=0:n.muted=!0),t},unmute:function(e){var t=this;if(!t._loaded)return t.on("play",function(){t.unmute(e)}),t;var n=e?t._nodeById(e):t._activeNode();return n&&(t._webAudio?n.gain.value=t._volume:n.muted=!1),t},volume:function(e,t){var n=this;if(e=parseFloat(e),e>=0&&1>=e){if(n._volume=e,!n._loaded)return n.on("play",function(){n.volume(e,t)}),n;var r=t?n._nodeById(t):n._activeNode();return r&&(n._webAudio?r.gain.value=e:r.volume=e*d.volume()),n}return n._volume},loop:function(e){var t=this;return"boolean"==typeof e?(t._loop=e,t):t._loop},sprite:function(e){var t=this;return"object"==typeof e?(t._sprite=e,t):t._sprite},pos:function(e,n){var r=this;if(!r._loaded)return r.on("load",function(){r.pos(e)}),"number"==typeof e?r:r._pos||0;e=parseFloat(e);var i=n?r._nodeById(n):r._activeNode();if(i)return e>=0?(r.pause(n),i._pos=e,r.play(i._sprite,n),r):r._webAudio?i._pos+(t.currentTime-r._playStart):i.currentTime;if(e>=0)return r;for(var o=0;o<r._audioNode.length;o++)if(r._audioNode[o].paused&&4===r._audioNode[o].readyState)return r._webAudio?r._audioNode[o]._pos:r._audioNode[o].currentTime},pos3d:function(e,t,n,r){var i=this;if(t="undefined"!=typeof t&&t?t:0,n="undefined"!=typeof n&&n?n:-.5,!i._loaded)return i.on("play",function(){i.pos3d(e,t,n,r)}),i;if(!(e>=0||0>e))return i._pos3d;if(i._webAudio){var o=r?i._nodeById(r):i._activeNode();o&&(i._pos3d=[e,t,n],o.panner.setPosition(e,t,n),o.panner.panningModel=i._model||"HRTF")}return i},fade:function(e,t,n,r,i){var o=this,a=Math.abs(e-t),s=e>t?"down":"up",u=a/.01,d=n/u;if(!o._loaded)return o.on("load",function(){o.fade(e,t,n,r,i)}),o;o.volume(e,i);for(var c=1;u>=c;c++)!function(){var e=o._volume+("up"===s?.01:-.01)*c,n=Math.round(1e3*e)/1e3,a=t;setTimeout(function(){o.volume(n,i),n===a&&r&&r()},d*c)}()},fadeIn:function(e,t,n){return this.volume(0).play().fade(0,e,t,n)},fadeOut:function(e,t,n,r){var i=this;return i.fade(i._volume,e,t,function(){n&&n(),i.pause(r),i.on("end")},r)},_nodeById:function(e){for(var t=this,n=t._audioNode[0],r=0;r<t._audioNode.length;r++)if(t._audioNode[r].id===e){n=t._audioNode[r];break}return n},_activeNode:function(){for(var e=this,t=null,n=0;n<e._audioNode.length;n++)if(!e._audioNode[n].paused){t=e._audioNode[n];break}return e._drainPool(),t},_inactiveNode:function(e){for(var t=this,n=null,r=0;r<t._audioNode.length;r++)if(t._audioNode[r].paused&&4===t._audioNode[r].readyState){e(t._audioNode[r]),n=!0;break}if(t._drainPool(),!n){var i;if(t._webAudio)i=t._setupAudioNode(),e(i);else{t.load(),i=t._audioNode[t._audioNode.length-1];var o=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",a=function(){i.removeEventListener(o,a,!1),e(i)};i.addEventListener(o,a,!1)}}},_drainPool:function(){var e,t=this,n=0;for(e=0;e<t._audioNode.length;e++)t._audioNode[e].paused&&n++;for(e=t._audioNode.length-1;e>=0&&!(5>=n);e--)t._audioNode[e].paused&&(t._webAudio&&t._audioNode[e].disconnect(0),n--,t._audioNode.splice(e,1))},_clearEndTimer:function(e){for(var t=this,n=0,r=0;r<t._onendTimer.length;r++)if(t._onendTimer[r].id===e){n=r;break}var i=t._onendTimer[n];i&&(clearTimeout(i.timer),t._onendTimer.splice(n,1))},_setupAudioNode:function(){var e=this,n=e._audioNode,r=e._audioNode.length;return n[r]="undefined"==typeof t.createGain?t.createGainNode():t.createGain(),n[r].gain.value=e._volume,n[r].paused=!0,n[r]._pos=0,n[r].readyState=4,n[r].connect(o),n[r].panner=t.createPanner(),n[r].panner.panningModel=e._model||"equalpower",n[r].panner.setPosition(e._pos3d[0],e._pos3d[1],e._pos3d[2]),n[r].panner.connect(n[r]),n[r]},on:function(e,t){var n=this,r=n["_on"+e];if("function"==typeof t)r.push(t);else for(var i=0;i<r.length;i++)t?r[i].call(n,t):r[i].call(n);return n},off:function(e,t){var n=this,r=n["_on"+e],i=t?t.toString():null;if(i){for(var o=0;o<r.length;o++)if(i===r[o].toString()){r.splice(o,1);break}}else n["_on"+e]=[];return n},unload:function(){for(var t=this,n=t._audioNode,r=0;r<t._audioNode.length;r++)n[r].paused||(t.stop(n[r].id),t.on("end",n[r].id)),t._webAudio?n[r].disconnect(0):n[r].src="";for(r=0;r<t._onendTimer.length;r++)clearTimeout(t._onendTimer[r].timer);var i=d._howls.indexOf(t);null!==i&&i>=0&&d._howls.splice(i,1),delete e[t._src],t=null}},n)var l=function(t,n){if(n in e)return t._duration=e[n].duration,void f(t);if(/^data:[^;]+;base64,/.test(n)){for(var r=atob(n.split(",")[1]),i=new Uint8Array(r.length),o=0;o<r.length;++o)i[o]=r.charCodeAt(o);h(i.buffer,t,n)}else{var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){h(a.response,t,n)},a.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n],t.load())};try{a.send()}catch(s){a.onerror()}}},h=function(n,r,i){t.decodeAudioData(n,function(t){t&&(e[i]=t,f(r,t))},function(){r.on("loaderror")})},f=function(e,t){e._duration=t?t.duration:e._duration,0===Object.getOwnPropertyNames(e._sprite).length&&(e._sprite={_default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e.on("load")),e._autoplay&&e.play()},p=function(n,r,i){var o=n._nodeById(i);o.bufferSource=t.createBufferSource(),o.bufferSource.buffer=e[n._src],o.bufferSource.connect(o.panner),o.bufferSource.loop=r[0],r[0]&&(o.bufferSource.loopStart=r[1],o.bufferSource.loopEnd=r[1]+r[2]),o.bufferSource.playbackRate.value=n._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:d,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=d,exports.Howl=c),"undefined"!=typeof window&&(window.Howler=d,window.Howl=c)}(),function(){var e=function(e,t,n,r,i,o){this.initialize(e,t,n,r,i,o)},t=e.prototype=new createjs.Container;t.lineShape,t.rootShape,t.pourShape,t.hairLength,t.gravity,t.fallSpeed=70,t.fallFriction=.2,t.fallVelocity=0,t.strength,t.rootSize,t.lineColor,t.strokeWidthOriginal,t.strokeWidth,t.originalStartX,t.originalSstartY,t.startX,t.startY,t.originalEndX,t.originalEndY,t.endX,t.endY,t.currentStartX,t.currentStartY,t.currentEndX,t.currentEndY,t.spring=.9,t.friction=.7,t.velocityX=0,t.velocityY=0,t.growDelay=5e3,t.dragged=!1,t.twanged=!1,t.plucked=!1,t.dropped=!1,t.destroyed=!1,t.growing=!1,t.count=0,t.Container_initialize=t.initialize,t.initialize=function(e,t,n,r,i,o){this.Container_initialize(),this.originalStartX=e.x,this.originalStartY=e.y,this.startX=e.x,this.startY=e.y,this.originalEndX=e.x,this.originalEndY=e.y-t,this.endX=this.originalEndX,this.endY=this.originalEndY,this.strength=o,this.hairLength=t,this.lineColor=n,this.rootSize=.7*r,this.strokeWidthOriginal=r,this.strokeWidth=r,this.currentStartX=this.startX,this.currentStartY=this.startY,this.currentEndX=this.endX,this.currentEndY=this.endY;var a=new createjs.Graphics;a.f(i),a.beginLinearGradientFill([i,"#ffbdb8"],[1,0],0,0,0,2).dc(this.currentStartX,this.currentStartY+this.rootSize,2*this.rootSize),a.dc(this.currentStartX,this.currentStartY+this.rootSize,2.5*this.rootSize),this.pourShape=new createjs.Shape(a),this.addChild(this.pourShape),this.drawLine();var s=new createjs.Graphics;s.f("#fff").dc(0,-this.hairLength,1*this.hairLength);var u=new createjs.Shape(s);this.addChild(u),u.alpha=.01,this.on("mousedown",this.clicked),this.on("pressmove",this.drag),this.on("pressup",this.drop),this.on("tick",this.handleTick),this.mouseChildren=!1},t.getHairPullAmount=function(){var e=new createjs.Point(this.currentEndX,this.currentEndY),t=new createjs.Point(this.startX,this.startY),n=getDistance(e,t)-this.hairLength;return n},t.drawLine=function(){var e=this.getHairPullAmount();if(this.strokeWidth=this.strokeWidthOriginal-.025*e,this.strokeWidth<.5*this.strokeWidthOriginal&&(this.strokeWidth=.5*this.strokeWidthOriginal),0==this.plucked){var t=new createjs.Point(this.originalStartX,this.originalStartY),n=new createjs.Point(this.currentEndX,this.currentEndY),r=getAngle(t,n),i=getVector(t,.1*e,r);this.currentStartX=i.x,this.currentStartY=i.y,this.pourShape.scaleX=1-5e-4*e,this.pourShape.scaleY=1+.0095*e,this.pourShape.rotation=r}this.removeChild(this.lineShape),this.removeChild(this.rootShape);var o=new createjs.Graphics;o.clear(),o.s(this.lineColor).ss(this.strokeWidth,"square"),o.mt(this.currentStartX,this.currentStartY).lt(this.currentEndX,this.currentEndY),this.lineShape=new createjs.Shape(o),this.addChildAt(this.lineShape,0),this.lineShape.alpha=.85},t.clicked=function(e){e.target;this.dragged=!0},t.drag=function(e){var t=(e.target,this.globalToLocal(e.stageX,e.stageY));if(1==this.plucked)return this.hairPlucked(),this.currentEndX=t.x,this.currentEndY=t.y,this.twanged=!1,this.pourShape.scaleX=1,this.pourShape.scaleY=1,void(this.pourShape.rotation=0);if(this.dragged){if(t.y>=this.startY-.25*this.hairLength)return this.twanged=!0,void(this.dragged=!1);this.getHairPullAmount()>=this.strength&&(console.log("PLUCKED"),playSFX("pluck"+rand(1,5)),this.plucked=!0),!this.plucked,this.currentEndX=t.x,this.currentEndY=t.y,this.twanged=!1}},t.drop=function(e){var t=(e.target,this.globalToLocal(e.stageX,e.stageY));return 1==this.plucked?(this.dropped=!0,void console.log("dropped")):void(this.dragged&&(this.currentEndX=t.x,this.currentEndY=t.y,this.twanged=!0))},t.hairPlucked=function(){var e=new createjs.Point(this.currentEndX,this.currentEndY),t=getVector(e,this.hairLength,180-this.gravity);this.startX=t.x,this.startY=t.y,this.twanged=!0},t.hairGrow=function(){this.plucked=!1,playSFX("grow"+rand(1,3)),this.startX=this.originalStartX,this.startY=this.originalStartY,this.currentStartX=this.originalStartX,this.currentStartY=this.originalStartY,this.endX=this.originalEndX,this.endY=this.originalEndY,this.currentEndX=this.originalStartX,this.currentEndY=this.originalStartY,this.destroyed=!1,this.growing=!0},t.springLine=function(e,t,n,r){return this.velocityX+=(e-n)*(this.spring-.07),n+=this.velocityX*=this.friction,this.velocityY+=(t-r)*(this.spring-.1),r+=this.velocityY*=this.friction,new createjs.Point(n,r)},t.growLine=function(e,t,n,r){return this.velocityX+=.08*(e-n),n+=this.velocityX*=this.friction,this.velocityY+=.08*(t-r),r+=this.velocityY*=this.friction,new createjs.Point(n,r)},t.handleTick=function(){if(!this.destroyed){if(this.twanged){var e=this.springLine(this.endX,this.endY,this.currentEndX,this.currentEndY);this.currentEndX=e.x,this.currentEndY=e.y;var t=new createjs.Point(this.currentEndX,this.currentEndY),n=new createjs.Point(this.endX,this.endY);getDistance(t,n)<.2&&(this.twanged=!1)}if(this.plucked){var e=this.springLine(this.startX,this.startY,this.currentStartX,this.currentStartY);this.currentStartX=e.x,this.currentStartY=e.y}if(this.dropped){if(this.lineShape.y>window.innerHeight){this.dropped=!1,this.destroyed=!0,this.removeChild(this.lineShape),console.log("destroyed");var r=this;setTimeout(function(){r.hairGrow()},this.growDelay)}this.fallVelocity>1?this.fallVelocity=1:this.fallVelocity+=this.fallFriction;var i=new createjs.Point(this.lineShape.x,this.lineShape.y),o=this.fallSpeed*this.fallVelocity,a=getVector(i,o,180-this.gravity);return this.lineShape.y=a.y,void(this.lineShape.x=a.x)}if(this.growing){console.log("growing");var e=this.growLine(this.endX,this.endY,this.currentEndX,this.currentEndY);this.currentEndX=e.x,this.currentEndY=e.y;var t=new createjs.Point(this.currentEndX,this.currentEndY),n=new createjs.Point(this.endX,this.endY);getDistance(t,n)<.2&&(this.growing=!1)}this.drawLine()}},t.setGravity=function(e){this.gravity=e},window.Hair=e}(),Modernizr.canvas)var soundLeval=.7;var noHairs=40,padding=.3,hairOffset=.25,stage,titleCont,hairCont,scaler=1,hairLength=45*scaler,hairWidth=10*scaler,hairColor="#766b6a",skinColor="#ffc7c0",hairStrength=[150,200],hairPosRandom=5,hairRotRandom=5,hairs=[];window.addEventListener("resize",resize,!1);